{"ast":null,"code":"var _jsxFileName = \"/Users/ihyeonju/project/vcmusic_front/src/components/generator/dragdrop.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useCallback, useRef, useState, useEffect } from \"react\";\nimport \"./DragDrop.scss\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst baebae = require(\"../../assets/baebaeFull.mp3\");\n\nconst DragDrop = () => {\n  _s();\n\n  const [isDragging, setIsDragging] = useState(false);\n  const [files, setFiles] = useState([]);\n  const dragRef = useRef(null);\n  const fileId = useRef(0);\n  const [audioFile, setAudioFile] = useState('');\n  useEffect(() => {\n    // console.log(files[0].object.stream)\n    console.log(baebae);\n\n    function getBase64(file) {\n      let reader = new FileReader();\n      reader.readAsDataURL(file);\n\n      reader.onload = function () {\n        if (reader.result) {\n          setAudioFile(reader.result);\n        }\n      };\n\n      reader.onerror = function (error) {\n        console.log('Error: ', error);\n      };\n    }\n\n    getBase64;\n  }, [files]);\n  const onChangeFiles = useCallback(e => {\n    let selectFiles = [];\n    let tempFiles = files;\n\n    if (e.type === \"drop\") {\n      selectFiles = e.dataTransfer.files;\n    } else {\n      selectFiles = e.target.files;\n    }\n\n    for (const file of selectFiles) {\n      tempFiles = [...tempFiles, {\n        id: fileId.current++,\n        object: file\n      }];\n    }\n\n    setFiles(tempFiles);\n  }, [files]);\n  const handleFilterFile = useCallback(id => {\n    setFiles(files.filter(file => file.id !== id));\n  }, [files]);\n  const handleDragIn = useCallback(e => {\n    e.preventDefault();\n    e.stopPropagation();\n  }, []);\n  const handleDragOut = useCallback(e => {\n    e.preventDefault();\n    e.stopPropagation();\n    setIsDragging(false);\n  }, []);\n  const handleDragOver = useCallback(e => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    if (e.dataTransfer.files) {\n      setIsDragging(true);\n    }\n  }, []);\n  const handleDrop = useCallback(e => {\n    e.preventDefault();\n    e.stopPropagation();\n    onChangeFiles(e);\n    setIsDragging(false);\n  }, [onChangeFiles]);\n  const initDragEvents = useCallback(() => {\n    if (dragRef.current !== null) {\n      dragRef.current.addEventListener(\"dragenter\", handleDragIn);\n      dragRef.current.addEventListener(\"dragleave\", handleDragOut);\n      dragRef.current.addEventListener(\"dragover\", handleDragOver);\n      dragRef.current.addEventListener(\"drop\", handleDrop);\n    }\n  }, [handleDragIn, handleDragOut, handleDragOver, handleDrop]);\n  const resetDragEvents = useCallback(() => {\n    if (dragRef.current !== null) {\n      dragRef.current.removeEventListener(\"dragenter\", handleDragIn);\n      dragRef.current.removeEventListener(\"dragleave\", handleDragOut);\n      dragRef.current.removeEventListener(\"dragover\", handleDragOver);\n      dragRef.current.removeEventListener(\"drop\", handleDrop);\n    }\n  }, [handleDragIn, handleDragOut, handleDragOver, handleDrop]);\n  useEffect(() => {\n    initDragEvents();\n    return () => resetDragEvents();\n  }, [initDragEvents, resetDragEvents]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"DragDrop\",\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"file\",\n      id: \"fileUpload\",\n      style: {\n        display: \"none\"\n      },\n      multiple: true,\n      onChange: onChangeFiles\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      className: isDragging ? \"DragDrop-File-Dragging\" : \"DragDrop-File\",\n      htmlFor: \"fileUpload\",\n      ref: dragRef,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"\\uD30C\\uC77C \\uCCA8\\uBD80\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"DragDrop-Files\",\n      children: files.length > 0 && files.map(file => {\n        const {\n          id,\n          object: {\n            name\n          }\n        } = file;\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"DragDrop-Files-Filter\",\n            onClick: () => handleFilterFile(id),\n            children: \"X\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 19\n          }, this)]\n        }, id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 17\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 9\n    }, this), audioFile.toString().length > 0 ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"audio\", {\n        src: audioFile.toString()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 13\n      }, this)\n    }, void 0, false) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 136,\n    columnNumber: 7\n  }, this);\n};\n\n_s(DragDrop, \"uGTRTktCqbXVVd/RGoHfj6qtiLU=\");\n\n_c = DragDrop;\nexport default DragDrop;\n\nvar _c;\n\n$RefreshReg$(_c, \"DragDrop\");","map":{"version":3,"sources":["/Users/ihyeonju/project/vcmusic_front/src/components/generator/dragdrop.tsx"],"names":["React","useCallback","useRef","useState","useEffect","baebae","require","DragDrop","isDragging","setIsDragging","files","setFiles","dragRef","fileId","audioFile","setAudioFile","console","log","getBase64","file","reader","FileReader","readAsDataURL","onload","result","onerror","error","onChangeFiles","e","selectFiles","tempFiles","type","dataTransfer","target","id","current","object","handleFilterFile","filter","handleDragIn","preventDefault","stopPropagation","handleDragOut","handleDragOver","handleDrop","initDragEvents","addEventListener","resetDragEvents","removeEventListener","display","length","map","name","toString"],"mappings":"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","sourcesContent":["import React, {\n    ChangeEvent,\n    useCallback,\n    useRef,\n    useState,\n    useEffect,\n    SetStateAction\n  } from \"react\";\n  import \"./DragDrop.scss\";\n\n  const baebae = require(\"../../assets/baebaeFull.mp3\");\n  \n  interface IFileTypes {\n    id: number;\n    object: File;\n  }\n  \n  const DragDrop = () => {\n    const [isDragging, setIsDragging] = useState<boolean>(false);\n    const [files, setFiles] = useState<IFileTypes[]>([]);\n  \n    const dragRef = useRef<HTMLLabelElement | null>(null);\n    const fileId = useRef<number>(0);\n    const [audioFile, setAudioFile] = useState<string | ArrayBuffer>('');\n\n    useEffect(()=>{\n        // console.log(files[0].object.stream)\n        console.log(baebae)\n\n        function getBase64(file: File) {\n            let reader = new FileReader();\n            reader.readAsDataURL(file);\n            reader.onload = function () {\n                if(reader.result){\n                    setAudioFile(reader.result)\n                }\n            };\n            reader.onerror = function (error) {\n                console.log('Error: ', error);\n            };\n        }\n\n        getBase64\n    },[files])\n  \n    const onChangeFiles = useCallback(\n      (e: ChangeEvent<HTMLInputElement> | any): void => {\n        let selectFiles: File[] = [];\n        let tempFiles: IFileTypes[] = files;\n  \n        if (e.type === \"drop\") {\n          selectFiles = e.dataTransfer.files;\n        } else {\n          selectFiles = e.target.files;\n        }\n  \n        for (const file of selectFiles) {\n          tempFiles = [\n            ...tempFiles,\n            {\n              id: fileId.current++,\n              object: file\n            }\n          ];\n        }\n  \n        setFiles(tempFiles);\n      },\n      [files]\n    );\n  \n    const handleFilterFile = useCallback(\n      (id: number): void => {\n        setFiles(files.filter((file: IFileTypes) => file.id !== id));\n      },\n      [files]\n    );\n  \n    const handleDragIn = useCallback((e: DragEvent): void => {\n      e.preventDefault();\n      e.stopPropagation();\n    }, []);\n  \n    const handleDragOut = useCallback((e: DragEvent): void => {\n      e.preventDefault();\n      e.stopPropagation();\n  \n      setIsDragging(false);\n    }, []);\n  \n    const handleDragOver = useCallback((e: DragEvent): void => {\n      e.preventDefault();\n      e.stopPropagation();\n  \n      if (e.dataTransfer!.files) {\n        setIsDragging(true);\n      }\n    }, []);\n  \n    const handleDrop = useCallback(\n      (e: DragEvent): void => {\n        e.preventDefault();\n        e.stopPropagation();\n  \n        onChangeFiles(e);\n        setIsDragging(false);\n      },\n      [onChangeFiles]\n    );\n  \n    const initDragEvents = useCallback((): void => {\n      if (dragRef.current !== null) {\n        dragRef.current.addEventListener(\"dragenter\", handleDragIn);\n        dragRef.current.addEventListener(\"dragleave\", handleDragOut);\n        dragRef.current.addEventListener(\"dragover\", handleDragOver);\n        dragRef.current.addEventListener(\"drop\", handleDrop);\n      }\n    }, [handleDragIn, handleDragOut, handleDragOver, handleDrop]);\n  \n    const resetDragEvents = useCallback((): void => {\n      if (dragRef.current !== null) {\n        dragRef.current.removeEventListener(\"dragenter\", handleDragIn);\n        dragRef.current.removeEventListener(\"dragleave\", handleDragOut);\n        dragRef.current.removeEventListener(\"dragover\", handleDragOver);\n        dragRef.current.removeEventListener(\"drop\", handleDrop);\n      }\n    }, [handleDragIn, handleDragOut, handleDragOver, handleDrop]);\n  \n    useEffect(() => {\n      initDragEvents();\n  \n      return () => resetDragEvents();\n    }, [initDragEvents, resetDragEvents]);\n  \n    return (\n      <div className=\"DragDrop\">\n        <input\n          type=\"file\"\n          id=\"fileUpload\"\n          style={{ display: \"none\" }}\n          multiple={true}\n          onChange={onChangeFiles}\n        />\n  \n        <label\n          className={isDragging ? \"DragDrop-File-Dragging\" : \"DragDrop-File\"}\n          htmlFor=\"fileUpload\"\n          ref={dragRef}\n        >\n          <div>파일 첨부</div>\n        </label>\n  \n        <div className=\"DragDrop-Files\">\n          {files.length > 0 &&\n            files.map((file: IFileTypes) => {\n              const {\n                id,\n                object: { name }\n              } = file;\n  \n              return (\n                <div key={id}>\n                  <div>{name}</div>\n                  <div\n                    className=\"DragDrop-Files-Filter\"\n                    onClick={() => handleFilterFile(id)}\n                  >\n                    X\n                  </div>\n                </div>\n              );\n            })}\n        </div>\n        {audioFile.toString().length > 0 ? <>\n            <audio src={audioFile.toString()}/>\n        </>:<></>}\n      </div>\n    );\n  };\n  \n  export default DragDrop;"]},"metadata":{},"sourceType":"module"}